<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tu TiÃªn RPG</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: radial-gradient(circle at top, #1b2333, #06080f);
  color: #eaeaea;
}

/* ===== OVERLAY ===== */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.card {
  width: 90%;
  max-width: 360px;
  background: linear-gradient(180deg,#141c2b,#0a0f1a);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 0 40px rgba(0,0,0,.6);
}

h2 { margin-top: 0; text-align: center; }

input, select, button {
  width: 100%;
  margin: 6px 0;
  padding: 10px;
  border-radius: 8px;
  border: none;
}

button {
  background: linear-gradient(135deg,#3b82f6,#2563eb);
  color: #fff;
  font-weight: bold;
}

.green { background: linear-gradient(135deg,#22c55e,#16a34a); }

/* ===== GAME UI ===== */
#game {
  padding: 12px;
}

.panel {
  background: rgba(255,255,255,.05);
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 10px;
}

.stat { font-size: 14px; margin: 2px 0; }
.small { font-size: 12px; opacity: .8; }
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginScreen" class="overlay">
  <div class="card">
    <h2>ğŸ” ÄÄƒng nháº­p</h2>
    <input id="username" placeholder="TÃ i khoáº£n">
    <input id="password" type="password" placeholder="Máº­t kháº©u">
    <button onclick="login()">ÄÄƒng nháº­p</button>
  </div>
</div>

<!-- CREATE CHARACTER -->
<div id="createCharScreen" class="overlay">
  <div class="card">
    <h2>ğŸ² Táº¡o NhÃ¢n Váº­t</h2>
    <input id="charName" placeholder="TÃªn nhÃ¢n váº­t">
    <select id="charGender">
      <option value="Nam">Nam</option>
      <option value="Ná»¯">Ná»¯</option>
    </select>

    <div class="small">ğŸŒ± Linh cÄƒn:</div>
    <div id="linhCanText"></div>

    <div class="small">âœ¨ TiÃªn thiÃªn (3):</div>
    <ul id="tienThienList"></ul>

    <button class="green" onclick="rollCharacter()">ğŸ² Roll láº¡i</button>
    <button onclick="confirmCharacter()">âœ… XÃ¡c nháº­n</button>
  </div>
</div>

<!-- GAME -->
<div id="game" style="display:none">
  <h2>ğŸ§˜ Tu TiÃªn RPG</h2>

  <div class="panel">
    <div id="charInfo"></div>
    <div class="stat">âš¡ Linh khÃ­: <span id="qi">0</span>/100</div>
    <div class="stat">â¤ï¸ HP: <span id="hp">100</span></div>
  </div>

  <div class="panel">
    <button onclick="startCultivation()">ğŸ§˜ Báº¯t Ä‘áº§u tu luyá»‡n</button>
    <button onclick="stopCultivation()">â¸ Dá»«ng</button>
  </div>

  <div class="panel small" id="log"></div>
</div>

<script>
/* ================= DATA ================= */
const LINH_CAN = [
  "Kim linh cÄƒn","Má»™c linh cÄƒn","Thá»§y linh cÄƒn",
  "Há»a linh cÄƒn","Thá»• linh cÄƒn",
  "Song linh cÄƒn","Tam linh cÄƒn","NgÅ© hÃ nh linh cÄƒn"
];

const TIEN_THIEN = [
  "ThiÃªn má»‡nh chi tá»­","KhÃ­ váº­n ngáº­p trá»i","Ngá»™ tÃ­nh siÃªu phÃ m",
  "Huyáº¿t máº¡ch cá»• xÆ°a","NgÆ°á»i xuyÃªn khÃ´ng","TrÃ¹ng sinh giáº£",
  "Äáº¡o tÃ¢m kiÃªn Ä‘á»‹nh","ThÃ¢n thá»ƒ linh máº«n","Linh há»“n cÆ°á»ng Ä‘áº¡i",
  "Gia tá»™c tháº¿ gia","Äan Ä‘áº¡o ká»³ tÃ i","Kiáº¿m Ä‘áº¡o ká»³ tÃ i",
  "VÃµ Ä‘áº¡o ká»³ tÃ i","KhÃ­ váº­n Ä‘en Ä‘á»§i","ThiÃªn phÃº bÃ¬nh thÆ°á»ng"
];

/* ================= STATE ================= */
let player = null;
let cultivateTimer = null;

/* ================= LOGIN ================= */
function login() {
  const u = username.value.trim();
  const p = password.value.trim();
  if (!u || !p) return alert("Nháº­p Ä‘á»§ thÃ´ng tin");
  localStorage.setItem("account", u);
  loginScreen.style.display = "none";
  boot();
}

/* ================= CHARACTER ================= */
function rollCharacter() {
  const lc = LINH_CAN[Math.floor(Math.random()*LINH_CAN.length)];
  const tt = [...TIEN_THIEN].sort(()=>0.5-Math.random()).slice(0,3);
  linhCanText.textContent = lc;
  tienThienList.innerHTML = tt.map(t=>`<li>${t}</li>`).join("");
  window._roll = { lc, tt };
}

function confirmCharacter() {
  const name = charName.value.trim();
  if (!name) return alert("Nháº­p tÃªn");
  player = {
    name,
    gender: charGender.value,
    linhCan: _roll.lc,
    tienThien: _roll.tt,
    qi: 0,
    hp: 100
  };
  localStorage.setItem("character", JSON.stringify(player));
  createCharScreen.style.display = "none";
  initGame();
}

/* ================= GAME ================= */
function initGame() {
  player = JSON.parse(localStorage.getItem("character"));
  game.style.display = "block";
  render();
}

function render() {
  charInfo.innerHTML = `
  ğŸ‘¤ ${player.name} (${player.gender})<br>
  ğŸŒ± ${player.linhCan}<br>
  âœ¨ ${player.tienThien.join(", ")}
  `;
  qi.textContent = player.qi;
  hp.textContent = player.hp;
}

function startCultivation() {
  if (cultivateTimer) return;
  log.textContent = "ğŸ§˜ Äang tu luyá»‡n...";
  cultivateTimer = setInterval(()=>{
    player.qi += 1;
    if (player.qi >= 100) player.qi = 100;
    save();
    render();
  },1000);
}

function stopCultivation() {
  clearInterval(cultivateTimer);
  cultivateTimer = null;
  log.textContent = "â¸ ÄÃ£ dá»«ng tu luyá»‡n";
}

function save() {
  localStorage.setItem("character", JSON.stringify(player));
}

/* ================= BOOT ================= */
function boot() {
  const acc = localStorage.getItem("account");
  const ch = localStorage.getItem("character");

  if (!acc) loginScreen.style.display = "flex";
  else if (!ch) {
    createCharScreen.style.display = "flex";
    rollCharacter();
  } else initGame();
}

window.addEventListener("load", boot);
</script>

</body>
</html>
